<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="DICE is a Deep Learning classification engine applied to Digital Mock-Ups (DMU).">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>DICE - a Deep Learning based DMU Imagery Classification Engine</title>

        <link rel="stylesheet" href="css/main.css">

        <link rel="apple-touch-icon" sizes="57x57" href="img/favicons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="img/favicons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="img/favicons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="img/favicons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="img/favicons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="img/favicons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="img/favicons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="img/favicons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192" href="img/favicons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="img/favicons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">
        <link rel="manifest" href="img/favicons/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="img/favicons/ms-icon-144x144.png">

        <meta name="theme-color" content="#ffffff">
        <style>
            .github-corner:hover .octo-arm {
                animation: octocat-wave 560ms ease-in-out
            }
            @keyframes octocat-wave {
                0%, 100% {
                    transform: rotate(0)
                }
                20%, 60% {
                    transform: rotate(-25deg)
                }
                40%, 80% {
                    transform: rotate(10deg)
                }
            }
            @media (max-width: 500px) {
                .github-corner:hover .octo-arm {
                    animation: none
                }
                .github-corner .octo-arm {
                    animation: octocat-wave 560ms ease-in-out
                }
            }
        </style>
    </head>
    <body>
        <a href="https://github.com/DEKHTIARJonathan/DICE-DMU_Imagery_Classification_Engine" class="github-corner" target="_blank">
            <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;">
                <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
                <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
                <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
            </svg>
        </a>
        <div class="container">
            <h1><a href="./">DICE</a></h1>
            <p><a href="https://github.com/DEKHTIARJonathan/DICE-DMU_Imagery_Classification_Engine">DICE</a> is a Deep Learning classification engine applied to Digital Mock-Ups (DMU).</p>

            <h2 id="solo-is-useful-if">Try DICE by uploading a screenshot</h2>
            <p>Only the supported Part-Families can be uploaded and tested to DICE.</p>

            <form id="my_form" method="post" action="https://dice-dmu-classifier.herokuapp.com/classify_image" enctype="multipart/form-data">
                <input type="file" name="imagefile" accept="image/*" id="img_input"><br>
                <img id="img_preview" src="#" style="max-width: 300px; max-height: 300px; display:none;"/><br>
                <button type="submit" id="classifyBTN">Classify</button>
                <button id="resetBTN">Clear File</button>
            </form>

            <div id="results"></div>

            <h2 id="open-source-licence---creative-commons">Open Source Licence - Creative Commons:</h2>
            <h3 id="you-are-free-to">You are free to:</h3>
            <ul>
                <li><strong>Share</strong> — copy and redistribute the material in any medium or format</li>
                <li><strong>Adapt</strong> — remix, transform, and build upon the material for any purpose, even commercially.</li>
            </ul>
            <p><em>The licensor cannot revoke these freedoms as long as you follow the license terms.</em></p>
            <h3 id="under-the-following-terms">Under the following terms:</h3>
            <ul>
                <li><strong>Attribution</strong> — You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</li>
                <li><strong>ShareAlike</strong> — If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</li>
                <li><strong>No additional restrictions</strong> — You may not apply legal terms or technological measures that legally restrict others from doing anything the license permits.</li>
            </ul>
        </div>
        <hr>
        <footer style="text-align: center; margin-bottom: 30px;">
            <a href="https://github.com/chibicode/solo" target="_blank">SOLO</a> Jekyll Theme Developed by <a href="http://github.com/chibicode" target="_blank">Shu Uesug</a>
        </footer>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
        <script>
            $(function () {
                $('#my_form').on('submit', function (e) {
                    // On empêche le navigateur de soumettre le formulaire
                    e.preventDefault();

                    var $form = $(this);
                    var formdata = (window.FormData) ? new FormData($form[0]) : null;
                    var data = (formdata !== null) ? formdata : $form.serialize();

                    $.ajax({
                        url: $form.attr('action'),
                        type: $form.attr('method'),
                        contentType: false, // obligatoire pour de l'upload
                        processData: false, // obligatoire pour de l'upload
                        dataType: 'json', // selon le retour attendu
                        data: data,
                        success: function (response) {
                            rslt_str = ""
                            $.each(response.results, function(key, value){
                                rslt_str += "<b>"+value.class_name+"</b>: " + Math.round(value.probability*100)/100 + "%<br><br>";
                            });
                            $("#results").html(rslt_str);
                        }
                    });
                });

                function readURL(input) {

                    if ($("#img_input").val() != ""){
                        if (input.files && input.files[0]) {
                            var reader = new FileReader();

                            reader.onload = function (e) {
                                $('#img_preview').attr('src', e.target.result);
                                $('#img_preview').show();
                            }

                            reader.readAsDataURL(input.files[0]);
                        }
                    }
                    else {
                        $('#img_preview').attr('src', '');
                        $('#img_preview').hide();
                    }

                }

                $("#img_input").change(function(){
                    readURL(this);
                });

                $("#resetBTN").click(function() {
                    $("#img_input").val("").change();
                    $("#results").html("");
                    return false;
                });
            });
        </script>
    </body>
</html>
